# 耕地属性系统说明文档

## 配置文件结构
耕地属性配置文件位于 `config/pastoral_tales/farmland_properties.json`，用于定义各种耕地属性及其特性。

### 基本结构
```json
{
  "properties": {
    "属性名": {
      "base_value": 基础值,
      "min_value": 最小值,
      "max_value": 最大值,
      "consumption": 每次生长消耗量,
      "recovery": {
        "tick_rate": 恢复触发概率,
        "amount": 恢复量
      },
      "modifiers": {
        "生物群系参数": 权重值
      }
    }
  }
}
```

### 属性字段说明

| 字段 | 类型 | 说明 |
|------|------|------|
| `base_value` | 数值 | 属性的基础值 |
| `min_value` | 数值 | 属性的最小允许值 |
| `max_value` | 数值 | 属性的最大允许值 |
| `consumption` | 数值 | 每次作物生长时消耗的量 |
| `recovery.tick_rate` | 数值 | 每tick触发恢复的概率 (0-1) |
| `recovery.amount` | 数值 | 每次恢复的数值 |

### 生物群系参数修饰符

生物群系参数通过 `modifiers` 影响属性值，支持以下参数：

| 参数 | 说明 | 用途 |
|------|------|------|
| `T` | 温度 | 用于生物群系的放置，不影响地形 |
| `V` | 植被（湿度） | 用于生物群系的放置，不影响地形 |
| `C` | 大陆性 | 用于区分海洋与陆地，决定生物群系的放置 |
| `E` | 侵蚀度 | 决定地形的平缓程度，此值越高表示地形越平缓 |
| `D` | 深度 | 随高度变化，用于生物群系放置 |
| `W` | 奇异性 | 影响山脊走向和地形起伏，用于特殊生物群系的放置 |

## 配置示例

### 氮含量属性示例
```json
{
  "properties": {
    "nitrogen": {
      "base_value": 0.5,
      "min_value": 0.0,
      "max_value": 1.0,
      "consumption": 0.0001,
      "recovery": {
        "tick_rate": 0.002,
        "amount": 0.01
      },
      "modifiers": {
        "V": 0.5,
        "D": 0.3,
        "W": 0.2
      }
    }
  }
}
```

在这个示例中：
- 基础氮含量为 0.5
- 氮含量范围在 0.0 到 1.0 之间
- 每次作物生长消耗 0.0001 的氮含量
- 有 0.2% 的几率每tick恢复 0.01 的氮含量
- 受植被(V)、深度(D)和奇异性(W)影响，权重分别为 0.5、0.3 和 0.2

## 注意事项

1. 所有的数值属性都必须在其定义的最小值和最大值范围内
2. 恢复率(`tick_rate`)必须在0到1之间
3. 修饰符权重的总和建议为1.0
4. 消耗量应当小于恢复量，以确保可持续性