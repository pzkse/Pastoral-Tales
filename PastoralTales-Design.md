# 田园物语 (Pastoral Tales)
**模组设计文档 v1.0**

文档信息：
- 创建时间：2025-02-17 13:54:58 UTC
- 作者：pumpkin1zz
- 开发环境：NeoForge 1.21.1
- 最后更新：2025-02-17 13:54:58 UTC

## 1. 模组信息
- 模组ID：pastoral_tales
- 中文名：田园物语
- 英文名：Pastoral Tales
- 版本：1.0.0-SNAPSHOT

## 2. 核心系统

### 2.1 土地属性生成系统
基于原版生物群系参数计算土地属性：

#### 原版参数范围
- 温度（Temperature）：-2.22 ~ 2.22
- 湿度（Humidity）：-1.69 ~ 1.69
- 大陆性（Continentalness）：-3.66 ~ 3.66
- 侵蚀度（Erosion）：-2.42 ~ 2.42
- 奇异性（Weirdness）：-2.86 ~ 2.86
- 深度（Depth）：-2.0 ~ 2.0

#### 属性计算规则
1. **肥沃度计算**
   - 基础值：0.3
   - 温度影响：适中温度（-0.15~0.2）提供最佳加成
   - 湿度影响：较高湿度提供正面加成
   - 侵蚀度影响：低侵蚀提供轻微正面加成

2. **沙黏性计算**
   - 基础值：0.5
   - 大陆性影响：高大陆性倾向粘土质
   - 侵蚀度影响：高侵蚀倾向沙质
   - 深度影响：较深处倾向粘土质

3. **初始杂草程度**
   - 基础值：0.0
   - 湿度影响：较高湿度略微提高初始值
   - 温度影响：适中温度略微提高初始值

4. **初始碎石程度**
   - 基础值：0.1
   - 侵蚀度影响：高侵蚀提高初始值
   - 大陆性影响：高大陆性提高初始值

### 2.2 土地属性系统
- **肥沃度**：0.0 - 1.0
  - 影响作物产量
  - 使用肥料和锄头提升
  - 随时间缓慢衰减

- **沙黏性**：0.0（粘土） - 1.0（沙子）
  - 基于生物群系参数计算初始值
  - 使用沙子/粘土调整
  - 通过锄头激活调整效果

- **杂草程度**：0.0 - 1.0
  - 影响作物生长
  - 使用锄头清除
  - 随时间增长

- **碎石程度**：0.0 - 1.0
  - 影响作物生长
  - 使用锄头清除
  - 随时间增长

### 2.3 作物特性系统
- **日照适应性**：0.0 - 1.0
- **温度适应性**：0.0 - 1.0
- **沙/黏倾向值**：0.0 - 1.0
- **荒度抗性**：0.0 - 1.0
- **肥料适应性**：0.0 - 1.0

### 2.4 环境影响系统
- **海拔效果**
  - 每升高10格：温度-0.1
  - 每降低10格：光照-10%

## 3. 物品与方块

### 3.1 新增物品
- 基础肥料
- 高级肥料
- 土壤检测器（显示完整的土壤参数）

### 3.2 新增方块
- 改良耕地（扩展原版耕地）

## 4. 交互系统

### 4.1 工具交互
- **锄头功能**
  - 翻地：降低杂草和碎石
  - 改良：配合物品调整土壤属性
  - 消耗耐久：2点/次

### 4.2 物品使用
- **肥料使用**
  - 右击土地：标记待改良
  - 使用锄头：提升肥沃度
  - 基础肥料：+0.2肥沃度
  - 高级肥料：+0.4肥沃度

### 4.3 土壤调整
- **沙子**：提升沙性 +0.2
- **粘土**：提升粘性 +0.2

## 5. 实现步骤

### 第一阶段 - 核心系统
1. 创建基础项目结构
2. 实现土地属性生成系统
3. 实现土地属性存储系统
4. 实现环境参数读取

### 第二阶段 - 作物系统
1. 实现作物特性系统
2. 添加基础作物属性
3. 实现生长修改器
4. 添加产量计算

### 第三阶段 - 交互系统
1. 实现工具交互
2. 添加物品使用效果
3. 实现环境影响
4. 添加UI界面

### 第四阶段 - 完善
1. 添加配置文件
2. 调整平衡性
3. 补充本地化文本
4. 添加进度和指南

## 6. 技术实现要点

### 6.1 数据存储
- 使用NBT存储土地数据
- 实现区块数据同步
- 添加数据缓存机制

### 6.2 性能优化
- 减少不必要的数据保存
- 优化计算频率
- 实现高效的数据结构

### 6.3 兼容性
- 支持其他模组的生物群系
- 提供API接口
- 实现配置系统

## 7. 注意事项
- 保持代码模块化
- 注重游戏平衡性
- 保证性能优化
- 提供完整文档
```

主要更新内容：
1. 添加了文档创建时间和最后更新时间
2. 新增了详细的土地属性生成系统，基于原版的6个生物群系参数
3. 为土壤检测器添加了更详细的功能描述
4. 调整了实现步骤，将土地属性生成系统的实现放在第一优先级

这样的设计会更好地遵循原版的生物群系生成机制，使得模组更加自然地融入游戏。你觉得这个设计如何？需要进一步调整吗？